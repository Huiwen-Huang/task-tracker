"use strict";(self["webpackChunktask_tracker_vue"]=self["webpackChunktask_tracker_vue"]||[]).push([[994],{4994:function(t,e,o){o.r(e),o.d(e,{default:function(){return N}});var l=o(6768),n=o(4232),s=o(5130),d=o(5539);const a={class:"container mb-3"},c={class:"row mt-5 justify-content-between align-items-center m-auto mb-md-0 mb-5"},i={class:"col-md-6 col-7 m-auto d-flex justify-content-md-end justify-content-center align-items-center text-center"},r={class:"mx-md-4 mx-3 fw-bold fs-5"},u={class:"todos row mt-4"},m={class:"col-md-9 col-11 mx-auto mt-5 p-0 d-md-flex justify-content-md-between"},p={class:"card border-primary me-md-3 mb-4 mx-auto w-100 shadow"},f={class:"card-header fs-4 fw-bold d-flex justify-content-center"},h={class:"px-md-5 px-2 py-3 mx-lg-5"},k={class:"px-md-5 px-2 py-3 mx-lg-5"},x={class:"px-md-5 px-2 py-3 mx-lg-5"},g={class:"card-body text-primary px-4"},v={key:0},L=["onClick"],b={class:"row w-100 justify-content-between"},w={class:"col-10 d-flex align-items-center"},C={class:"col-2 d-flex align-items-center justify-content-end"},y={href:""},A=["onClick"],T={key:1},$={class:"footer col-md-9 col-11 mx-auto p-0"},_={class:"d-flex justify-content-between align-items-center"},D={class:"me-md-3"},j={class:"fw-bold"};function B(t,e,o,B,E,S){return(0,l.uX)(),(0,l.CE)("div",a,[(0,l.Lk)("div",c,[e[7]||(e[7]=(0,l.Lk)("div",{class:"col-md-4 col-12 px-md-0 px-5 mb-md-0 mb-4"},[(0,l.Lk)("img",{src:d,alt:"logo",class:"logo px-lg-4 py-lg-2 px-md-5 py-md-4 px-2 d-block mx-auto"})],-1)),(0,l.Lk)("div",i,[(0,l.Lk)("p",r,"Hi! "+(0,n.v_)(B.username),1),(0,l.Lk)("a",{href:"",class:"text-secondary text-decoration-none",onClick:e[0]||(e[0]=(0,s.D$)(((...t)=>B.logout&&B.logout(...t)),["prevent"]))},"登出")])]),(0,l.Lk)("form",{class:"col-md-8 col-11 m-auto d-flex justify-content-center align-items-center",onSubmit:e[2]||(e[2]=(0,s.D$)(((...t)=>B.addTodo&&B.addTodo(...t)),["prevent"]))},[(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control w-75 border border-primary text-center p-2",placeholder:"Add New Todo Now!","onUpdate:modelValue":e[1]||(e[1]=t=>B.newTodo=t)},null,512),[[s.Jo,B.newTodo]]),e[8]||(e[8]=(0,l.Lk)("button",{class:"btn btn-outline-primary ms-2"},[(0,l.Lk)("i",{class:"fa-solid fa-plus"})],-1))],32),(0,l.Lk)("div",u,[(0,l.Lk)("div",m,[(0,l.Lk)("div",p,[(0,l.Lk)("ul",f,[(0,l.Lk)("li",h,[(0,l.Lk)("a",{href:"#",class:(0,n.C4)(["text-center px-3 text-decoration-none",{visited:"all"==B.status}]),onClick:e[3]||(e[3]=(0,s.D$)((t=>B.status="all"),["prevent"]))},"All",2)]),(0,l.Lk)("li",k,[(0,l.Lk)("a",{href:"#",class:(0,n.C4)(["text-center px-3 text-decoration-none",{visited:"undo"==B.status}]),onClick:e[4]||(e[4]=(0,s.D$)((t=>B.status="undo"),["prevent"]))},"Undo",2)]),(0,l.Lk)("li",x,[(0,l.Lk)("a",{href:"#",class:(0,n.C4)(["text-center px-3 text-decoration-none",{visited:"done"==B.status}]),onClick:e[5]||(e[5]=(0,s.D$)((t=>B.status="done"),["prevent"]))},"Done",2)])]),(0,l.Lk)("div",g,[B.todos.length>0?((0,l.uX)(),(0,l.CE)("ul",v,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(B.filteredTodos,(t=>((0,l.uX)(),(0,l.CE)("li",{class:(0,n.C4)(["d-flex align-items-center rounded shadow-sm py-2 px-2 mb-2 w-100",{"bg-primary":null!==t.completed_at}]),key:t.id,onClick:(0,s.D$)((e=>B.doneTodo(t.id)),["prevent"])},[(0,l.Lk)("div",b,[(0,l.Lk)("div",w,[e[9]||(e[9]=(0,l.Lk)("button",{class:"btn p-0 rounded"},[(0,l.Lk)("i",{class:"bi bi-check-circle-fill text-light fs-4"})],-1)),(0,l.Lk)("p",{class:(0,n.C4)(["px-3",{"text-light":null!==t.completed_at}])},(0,n.v_)(t.content),3)]),(0,l.Lk)("div",C,[(0,l.Lk)("a",y,[(0,l.Lk)("i",{class:(0,n.C4)(["fa-regular fa-trash-can ms-2",{"text-light":null!==t.completed_at}]),onClick:(0,s.D$)((e=>B.deleteTodo(t.id)),["prevent","stop"])},null,10,A)])])])],10,L)))),128))])):((0,l.uX)(),(0,l.CE)("ul",T,e[10]||(e[10]=[(0,l.Lk)("li",{class:"fs-5 text-secondary text-center"},"Nothing Todo...",-1)])))])])]),(0,l.bo)((0,l.Lk)("div",$,[(0,l.Lk)("ul",_,[(0,l.Lk)("li",D,[e[11]||(e[11]=(0,l.eW)("尚有 ")),(0,l.Lk)("strong",j,(0,n.v_)(B.undone.length),1),e[12]||(e[12]=(0,l.eW)(" 項待辦"))]),(0,l.Lk)("li",{class:"btn btn-outline-primary me-md-3",onClick:e[6]||(e[6]=(0,s.D$)(((...t)=>B.deleteAll&&B.deleteAll(...t)),["prevent"]))},"清除已完成項目")])],512),[[s.aG,B.todos.length>0]])])])}o(4114);var E=o(144),S=o(4373),z=o(4874),K=o.n(z),X=o(4103),I={name:"app",setup(){const t="https://todoo.5xcamp.us",e=localStorage.getItem("token"),o=localStorage.getItem("username"),n=(0,E.KR)("Todo Category");localStorage.setItem("todoCategory",n);const s=()=>{const o={headers:{Authorization:e}};S.A.delete(`${t}/users/sign_out`,o).then((t=>{L(),console.log(t),setTimeout((()=>X.A.push("/")),1500)}))},d=(0,E.KR)([]),a=()=>{const o={headers:{Authorization:e}};S.A.get(`${t}/todos`,o).then((t=>{d.value=t.data.todos})).catch((t=>console.log(t)))};(0,l.sV)((()=>{a()}));const c={all:t=>t,undo:t=>t.filter((t=>null===t.completed_at)),done:t=>t.filter((t=>null!==t.completed_at))},i=(0,E.KR)("all"),r=(0,l.EW)((()=>c[i.value](d.value))),u=(0,E.KR)(""),m=()=>{if(""===u.value)return void g();const o={todo:{content:u.value.trim()}},l={headers:{Authorization:e}};S.A.post(`${t}/todos`,o,l).then((t=>{v();const e={};e.id=t.data.id,e.content=t.data.content,d.value.unshift(e),a(),u.value.focus()})).catch((t=>console.log(t))),u.value=""},p=o=>{const l={todo:{content:u.value}},n={headers:{Authorization:e}};S.A.put(`${t}/todos/${o}`,l,n).then((t=>{console.log(t)})).catch((t=>console.log(t)))},f=o=>{const l={headers:{Authorization:e}};S.A.patch(`${t}/todos/${o}/toggle`,{},l).then((t=>{b(),a()})).catch((t=>console.log(t)))},h=o=>{const l={headers:{Authorization:e}};S.A.delete(`${t}/todos/${o}`,l).then((t=>{console.log(t),w(),setTimeout((()=>a()),1500)})).catch((t=>console.log(t)))},k=()=>{const o={headers:{Authorization:e}},l=d.value.filter((t=>null!==t.completed_at));0===l.length?C():l.forEach((e=>{const l=`${t}/todos/${e.id}`;S.A.delete(l,o).then((t=>a())).catch((t=>{console.log(t)})),w()}))},x=(0,l.EW)((()=>d.value.filter((t=>null===t.completed_at)))),g=()=>{K().fire({text:"新增欄位不得空白！",confirmButtonText:"OK",confirmButtonColor:"#A7C4B5",width:300})},v=()=>{K().fire({title:"Add Success!",showConfirmButton:!1,timer:1e3,width:300})},L=()=>{K().fire({title:"Logout Success!",showConfirmButton:!1,timer:1500,width:400})},b=()=>{K().fire({title:"Todo Status Change.",showConfirmButton:!1,timer:1500,width:400})},w=()=>{K().fire({title:"Delete Success!",showConfirmButton:!1,timer:1500,width:400})},C=()=>{K().fire({title:"Todo undo!",showConfirmButton:!1,timer:1500,width:400})};return{username:o,newTodo:u,todos:d,undone:x,filters:c,status:i,filteredTodos:r,getTodo:a,addTodo:m,logout:s,editTodo:p,deleteTodo:h,doneTodo:f,deleteAll:k}}},R=o(1241);const W=(0,R.A)(I,[["render",B]]);var N=W}}]);
//# sourceMappingURL=994.67f58add.js.map